<script type="text/javascript" src="https://blockczech.atlassian.net/s/d41d8cd98f00b204e9800998ecf8427e-T/g2slup/b/9/c95134bc67d3a521bb3f4331beb9b804/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=cs-CZ&collectorId=54c2c1d1"></script>
<script type="text/javascript">
    // Function to wait for the collector script to be loaded and ready
    function waitForCollector(collectorId, maxRetries = 20, interval = 500) {
        let retries = 0;

        const intervalId = setInterval(() => {
            const collectorButton = document.querySelector(`#atlwdg-trigger`);
            if (collectorButton) {
                clearInterval(intervalId); // Stop checking
                // Style the collector button to resemble Jira-like style
                collectorButton.style.backgroundColor = '#0079bf'; // Jira blue
                collectorButton.style.color = 'white';
                collectorButton.style.border = 'none';
                collectorButton.style.padding = '8px 16px';
                collectorButton.style.fontSize = '14px';
                collectorButton.style.cursor = 'pointer';

                // Create a new button with a Jira-like style
                const redirectButton = document.createElement('button');
                redirectButton.textContent = 'Go to Report';
                redirectButton.style.backgroundColor = '#0079bf'; // Jira blue
                redirectButton.style.color = 'white';
                redirectButton.style.border = 'none';
                redirectButton.style.padding = '8px 16px';
                redirectButton.style.fontSize = '14px';
                redirectButton.style.cursor = 'pointer';
                redirectButton.onclick = function() {
                    window.location.href = 'https://adamblockcz.github.io/test/report/';
                };

                // Add the new button to the body
                document.body.appendChild(redirectButton);
            } else if (retries >= maxRetries) {
                clearInterval(intervalId); // Stop trying after max retries
                console.warn("JIRA Issue Collector did not load in time.");
            }
            retries++;
        }, interval);
    }

    // Call the wait function after the script loads
    window.onload = function () {
        waitForCollector('54c2c1d1');
    };
</script>
